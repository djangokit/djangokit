[uwsgi]
env = ENV={{ env }}
env = VERSION={{ version }}
env = DJANGO_SETTINGS_FILE={{ remote_settings_file }}

master = true
plugins = python3

uid = djangokit
gid = www-data

workers = 2
enable-threads = true
threads = 4

logto2 = /sites/djangokit/uwsgi.log

chdir = /sites/djangokit/current/app
virtualenv = /sites/djangokit/current/app/venv
wsgi-file = /sites/djangokit/current/app/wsgi.py

single-interpreter = true

# Clean up socket and pid files on exit
vacuum = true

# Kill requests that take too long
harakiri = 30

# Reload when memory usage gets too high
reload-on-rss = 256

# Ensure POST bodies are read
post-buffering = 1

die-on-term = true
